<%- include('../partials/header') %>


<!-- breadcrumb -->
<br>
<div class="container">
    <nav class="breadcrumb is-small" aria-label="breadcrumbs">
        <ul>
            <li><a href="/">Home</a></li>
            <li class="is-active"><a href="#" aria-current="page">My Recipes</a></li>
        </ul>
    </nav>
</div>

<!-- hero title -->
<section class="hero">
    <div class="hero-body">
        <p class="title  is-2">My Recipes</p>
        <!-- <p class="subtitle  is-4">Placeholder /recipes/userIndex</p> -->
    </div>
</section>
<br>



<!-- body/content -->
<div class="container">
    <div class="columns is-centered">
        <div class="column is-narrow table-container">
            <table class="table is-striped is-narrow is-hoverable">
    <!-- table header -->
                <thead>
                    <tr>
                        <th></th>
                        <th class="is-selected has-text-centered">Title</th>
                        <th class="is-selected has-text-centered">Category</th>
                        <th class="is-selected has-text-centered">Date Added</th>
                        <th class="is-selected has-text-centered">Last Updated</th>
                    </tr>
                </thead>

                <% recipes.forEach(function(r) { %>
                    <% if (user._id.equals(r.user)) { %>
    <!-- table body -->
                        <tbody>
    <!-- table rows -->                        
                            <tr>
    <!-- table cells generated by forEach fnc -->  
                                <td class="image is-64x64 has-text-centered">
                                    <% if (r.imageUrl) { %>
                                        <img class="is-rounded" src="<%= r.imageUrl %>" alt="Recipe Image">
                                    <% } else { %>
                                        <img class="is-rounded" src="/images/ojigi_kuma.png" alt="Placeholder Image">
                                    <% } %>
                                </td>
                                <td class="has-text-justified has-text-weight-bold"><a href="/recipes/<%= r._id %>"><%= r.name %></a></td>
                                <td class="has-text-justified"><%= r.category %></td>
                                <td class="has-text-justified"	><%= r.createdAt.toLocaleDateString() %></td>
                                <td class="has-text-justified is-italic"><%= r.updatedAt.toLocaleDateString() %></td>
    <!-- last 3 table cells are buttons  -->     
                                <td>
                                    <form action="/recipes/<%= r._id %>" method="GET">
                                        <button class="button is-info is-light is is-rounded" type="submit">Recipe Detail</button>
                                    </form>
                                <td>
                                    <form action="/recipes/<%= r._id %>/edit" method="GET">
                                        <button class="button is-warning is-light is-rounded" type="submit">Edit Recipe</button>
                                    </form>
                                </td>
                                <td>
                                    <form action="/recipes/<%= r._id %>?_method=DELETE" method="POST">
                                        <button class="button is-danger is-light is-rounded" type="submit">Delete Recipe</button>
                                    </form>
                                </td>
                            </tr>
                        </tbody>
                    <% } %>
                <% }) %>
            </table>
        </div>
    </div>
</div>


<!-- TODO: Add a message if a user did not submit anything? -->


<br><br>

<%- include('../partials/footer') %>